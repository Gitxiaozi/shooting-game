# 从照片中提取人脸头像说明

## 步骤1：安装依赖

首先需要安装Python和必要的库。在命令行中运行：

```bash
pip install -r requirements.txt
```

或者手动安装：
```bash
pip install opencv-python Pillow
```

## 步骤2：准备照片

将包含学生照片的图片文件放在游戏文件夹中（`cursor001/shooting-game`），或者记住图片的完整路径。

## 步骤3：运行脚本提取头像

有两种方式运行脚本：

### 方式1：直接运行（推荐）
```bash
cd cursor001\shooting-game
python extract_faces.py
```
然后输入图片路径，例如：`class_photo.jpg`

### 方式2：命令行参数
```bash
python extract_faces.py "图片路径"
```
例如：
```bash
python extract_faces.py "C:\Users\Administrator\Desktop\class_photo.jpg"
```

## 步骤4：查看结果

脚本运行完成后：
- 所有提取的头像会保存在 `enemies` 文件夹中，命名为 `enemy1.png`, `enemy2.png`, `enemy3.png` 等
- 每个头像尺寸为 **50x50 像素**
- 同时会创建一个通用的 `enemy.png` 文件（40x40像素），作为备用

## 步骤5：在游戏中使用

提取完成后，刷新游戏页面，游戏会自动：
- 加载 `enemies` 文件夹中的所有敌人头像
- 随机选择不同的头像作为敌人
- 如果找不到头像文件，会使用默认的红色方块图形

## 注意事项

1. **图片质量**：原图质量越高，提取的头像效果越好
2. **人脸检测**：如果某些人脸没有被检测到，脚本会尝试使用更宽松的参数重新检测
3. **头像数量**：游戏最多会尝试加载50个敌人头像（enemy1.png 到 enemy50.png）
4. **文件格式**：支持 PNG 和 JPG 格式的输入图片

## 故障排除

如果遇到问题：

1. **"找不到人脸检测器文件"**：
   - 确保已正确安装 opencv-python
   - 尝试重新安装：`pip install --upgrade opencv-python`

2. **"未检测到人脸"**：
   - 检查图片中是否有人脸
   - 尝试使用更清晰、光线更好的照片
   - 确保人脸在照片中足够大

3. **提取的头像不完整**：
   - 脚本会自动添加20像素的边距，如果还不够，可以修改脚本中的 `padding = 20` 值

